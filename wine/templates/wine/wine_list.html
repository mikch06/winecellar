{% extends "./base.html" %}
{% block content %}
<div class="container">
<br>
{% load static %}
<div class="table-responsive">
<div id="toolbar">
    <a class="btn btn-secondary" href="/wine/log" role="button"><img src="{% static "wine/bootstrap/icons/card-list.svg" %}" alt="Detail" width="" height="" title="Changes in Stock"></a>
</div>

<table
    class="table"
    data-toggle="table"
    data-classes="table table-borderless table-hover"
    id="wineTable"
    data-toolbar="#toolbar"
    data-toolbar-align="left"
    data-search="true"
    data-filter-control="true"
    data-filter-control-visible="false"
    data-show-search-clear-button="true"
    data-show-filter-control-switch="true"
    data-detail-view="true"
    data-detail-formatter="detailFormatter"
      data-query-params="queryParams"
>
  <thead>
    <tr>
      <th data-sortable="true" data-field="winename" data-filter-control="input">Wein</th>
      <th class="d-none d-sm-table-cell" data-sortable="true" data-field="producer" data-filter-control="input">Produzent</th>
      <th class="d-none d-sm-table-cell" data-sortable="true" data-field="country" data-filter-control="select" >Land</th>
      <th class="d-none d-sm-table-cell" data-sortable="true" data-field="region" data-visible="false" data-filter-control="input">Region</th>
      <th data-sortable="true" data-field="year" data-filter-control="select">Jahrgang</th>
      <th class="d-none d-sm-table-cell" data-sortable="true" data-field="grapes" data-filter-control="input">Trauben</th>
      <th class="d-none d-sm-table-cell" data-sortable="true" data-field="drinkfrom" data-filter-control="select">trinkbar von</th>
      <th class="d-none d-sm-table-cell" data-sortable="true" data-field="drinkto" data-filter-control="select">trinkbar bis</th>
      <th data-sortable="true" data-field="nmbrbottles" data-filter-control="select"><img src="{% static "wine/bootstrap/icons/basket-fill.svg" %}" alt="Detail" width="16" height="16" title="Detail"></th>
      <th class="d-none d-sm-table-cell" data-sortable="true" data-field="notes" data-visible="false" data-filter-control="input"></th>
    </tr>
  </thead>
<tbody>
{% for wine in object_list %}
{% load static %}
<tr class="trlist">

    <td>{{ wine.winename }}</td>
    <td class="d-none d-sm-table-cell">{{ wine.producer }}</td>
    <td class="d-none d-sm-table-cell">{{ wine.country }}</td>
    <td class="d-none d-sm-table-cell">{{ wine.region }}</td>
    <td>{{ wine.year|default_if_none:'' }}</td>
    <td class="d-none d-sm-table-cell">{{ wine.grapes }}</td>
    <td class="d-none d-sm-table-cell">{{ wine.drinkfrom|default_if_none:''}}</td>
    <td class="d-none d-sm-table-cell">{{ wine.drinkto|default_if_none:'' }}</td>
    <td>{{ wine.nmbrbottles }}</td>
    <td>{{ wine.notes }}</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

</body>
</html>
<script>
  function detailFormatter(index, row) {
    var html = []
    $.each(row, function (key, value) {
      html.push('<p><b>' + key + ':</b> ' + value + '</p><br>')
    })
    return html.join('')
  }
</script>
{% endblock %}